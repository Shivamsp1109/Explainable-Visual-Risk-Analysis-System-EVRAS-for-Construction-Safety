{
  "risk_level": "HIGH",
  "confidence": 0.927,
  "ppe_compliance": {
    "helmet": false,
    "mask": false,
    "vest": false,
    "score": 0.0
  },
  "ppe_per_person": [
    {
      "person_id": "o1",
      "helmet": false,
      "vest": false,
      "mask": false,
      "score": 0.0,
      "helmet_overlap": 0.0,
      "vest_overlap": 0.0,
      "mask_overlap": 0.0
    }
  ],
  "factors": [
    "person_no_helmet_indicator (p=0.58) for object_id=o1, person_conf=0.58",
    "person_no_vest_indicator (p=0.58) for object_id=o1, person_conf=0.58",
    "person_no_mask_indicator (p=0.58) for object_id=o1, person_conf=0.58",
    "person_at_height_indicator (p=0.03) for object_id=o1, person_conf=0.68",
    "person_height_no_helmet_indicator (p=0.02) for object_id=o1, p_height=0.034"
  ],
  "risk_graph": {
    "objects": [
      {
        "id": "o1",
        "type": "person",
        "confidence": 0.5829752683639526,
        "bbox": [
          68.37612915039062,
          1.3292236328125,
          228.588623046875,
          319.24481201171875
        ]
      }
    ],
    "relations": [
      {
        "from_id": "o1",
        "to_id": "scene_floor_estimate",
        "relation": "distance_to_floor_line_px",
        "value": 0.0,
        "prob": 0.0
      },
      {
        "from_id": "o1",
        "to_id": "helmet_missing",
        "relation": "helmet_overlap_score",
        "value": 0.0,
        "prob": 1.0
      },
      {
        "from_id": "o1",
        "to_id": "vest_missing",
        "relation": "vest_overlap_score",
        "value": 0.0,
        "prob": 1.0
      },
      {
        "from_id": "o1",
        "to_id": "mask_missing",
        "relation": "mask_overlap_score",
        "value": 0.0,
        "prob": 1.0
      },
      {
        "from_id": "o1",
        "to_id": "context_height_no_helmet",
        "relation": "combined_risk",
        "value": 0.019907884518020894,
        "prob": 0.019907884518020894
      }
    ],
    "risk_factors": [
      {
        "name": "person_at_height_indicator",
        "triggered": false,
        "probability": 0.034148763418197635,
        "evidence": [
          "object_id=o1",
          "person_conf=0.68",
          "floor_distance_px=0.0",
          "floor_score=0.00",
          "risk_probability=0.03",
          "person_conf_used=0.68"
        ]
      },
      {
        "name": "person_no_helmet_indicator",
        "triggered": true,
        "probability": 0.5829752683639526,
        "evidence": [
          "object_id=o1",
          "person_conf=0.58",
          "best_helmet_overlap=0.00",
          "missing_score=1.00",
          "risk_probability=0.58",
          "note=PPE uses original person_conf"
        ]
      },
      {
        "name": "person_no_vest_indicator",
        "triggered": true,
        "probability": 0.5829752683639526,
        "evidence": [
          "object_id=o1",
          "person_conf=0.58",
          "best_vest_overlap=0.00",
          "missing_score=1.00",
          "risk_probability=0.58",
          "note=PPE uses original person_conf"
        ]
      },
      {
        "name": "person_no_mask_indicator",
        "triggered": true,
        "probability": 0.5829752683639526,
        "evidence": [
          "object_id=o1",
          "person_conf=0.58",
          "best_mask_overlap=0.00",
          "missing_score=1.00",
          "risk_probability=0.58",
          "note=PPE uses original person_conf"
        ]
      },
      {
        "name": "person_height_no_helmet_indicator",
        "triggered": false,
        "probability": 0.019907884518020894,
        "evidence": [
          "object_id=o1",
          "p_height=0.034",
          "p_no_helmet=0.583",
          "combined_probability=0.020"
        ]
      }
    ]
  },
  "math_transparency": {
    "method": "Noisy-OR",
    "scene_floor_y": 319.24481201171875,
    "formula": "P = 1 - \u00ce\u00a0(1 - p_i)",
    "factor_probs": [
      0.583,
      0.583,
      0.583
    ],
    "one_minus_terms": [
      0.417025,
      0.417025,
      0.417025
    ],
    "product": 0.072525,
    "final_score": 0.927,
    "calculation_steps": [
      "P = 1 - (1-0.583) * (1-0.583) * (1-0.583)",
      "1 - p_i terms = 0.417025 * 0.417025 * 0.417025",
      "Product \u00ce\u00a0(1-p_i) = 0.072525",
      "Final P = 1 - 0.072525 = 0.927"
    ]
  },
  "llm_explanation_error": "500 Server Error: Internal Server Error for url: http://localhost:11434/api/chat"
}